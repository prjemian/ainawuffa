.. auto-generated by script ../../../../utils/nxdl2rst.py from the NXDL source NXdetector.nxdl.xml

.. index::
    ! NXdetector (base class)
    ! detector (base class)
    see: detector (base class); NXdetector

.. _NXdetector:

==========
NXdetector
==========

**Status**:

  base class, extends :ref:`NXobject`

**Description**:

  A detector, detector bank, or multidetector.

**Symbols**:

  These symbols will be used below to coordinate datasets with the same shape.

  **np**: number of scan points (only present in scanning measurements)

  **i**: number of detector pixels in the first (X, slowest) direction

  **j**: number of detector pixels in the second (Y, faster) direction

  **k**: number of detector pixels in the third (Z, if necessary, fastest) direction

  **tof**: number of bins in the time-of-flight histogram

**Groups cited**:
  :ref:`NXcollection`, :ref:`NXcylindrical_geometry`, :ref:`NXdata`, :ref:`NXdetector_module`, :ref:`NXgeometry`, :ref:`NXnote`, :ref:`NXoff_geometry`

.. index:: NXgeometry (base class); used in base class, NXdata (base class); used in base class, NXnote (base class); used in base class, NXcollection (base class); used in base class, NXdetector_module (base class); used in base class, NXoff_geometry (base class); used in base class, NXcylindrical_geometry (base class); used in base class

**Structure**:

  .. index:: time_of_flight (field)

  **time_of_flight[tof+1]**: (optional) :ref:`NX_FLOAT <NX_FLOAT>` {units=\ :ref:`NX_TIME_OF_FLIGHT <NX_TIME_OF_FLIGHT>`}

    Total time of flight

    .. index:: axis (field attribute)

    **@axis**: (optional) :ref:`NX_POSINT <NX_POSINT>`


      Obligatory value:  ``3``

    .. index:: primary (field attribute)

    **@primary**: (optional) :ref:`NX_POSINT <NX_POSINT>`


      Obligatory value:  ``1``

    .. index:: long_name (field attribute)

    **@long_name**: (optional) :ref:`NX_CHAR <NX_CHAR>`

      Total time of flight

  .. index:: raw_time_of_flight (field)

  **raw_time_of_flight[tof+1]**: (optional) :ref:`NX_INT <NX_INT>` {units=\ :ref:`NX_PULSES <NX_PULSES>`}

    In DAQ clock pulses

    .. index:: frequency (field attribute)

    **@frequency**: (optional) :ref:`NX_NUMBER <NX_NUMBER>`

      Clock frequency in Hz

  .. index:: detector_number (field)

  **detector_number**: (optional) :ref:`NX_INT <NX_INT>`

    Identifier for detector (pixels)
    Can be multidimensional, if needed

  .. index:: data (field)

  **data[np, i, j, tof]**: (optional) :ref:`NX_NUMBER <NX_NUMBER>` {units=\ :ref:`NX_ANY <NX_ANY>`}

    Data values from the detector.

    .. index:: long_name (field attribute)

    **@long_name**: (optional) :ref:`NX_CHAR <NX_CHAR>`

      Title of measurement

    .. index:: check_sum (field attribute)

    **@check_sum**: (optional) :ref:`NX_INT <NX_INT>`

      Integral of data as check of data integrity

  .. index:: data_error (field)

  **data_error[np, i, j, tof]**: (optional) :ref:`NX_NUMBER <NX_NUMBER>` {units=\ :ref:`NX_ANY <NX_ANY>`}

    The best estimate of the uncertainty in the data value. Where
    possible, this should be the standard deviation, which has the same units
    as the data.

  .. index:: x_pixel_offset (field)

  **x_pixel_offset**: (optional) :ref:`NX_FLOAT <NX_FLOAT>` {units=\ :ref:`NX_LENGTH <NX_LENGTH>`}

    Offset from the detector center in x-direction.
    Can be multidimensional when needed.

    .. index:: axis (field attribute)

    **@axis**: (optional) :ref:`NX_POSINT <NX_POSINT>`


      Obligatory value:  ``1``

    .. index:: primary (field attribute)

    **@primary**: (optional) :ref:`NX_POSINT <NX_POSINT>`


      Obligatory value:  ``1``

    .. index:: long_name (field attribute)

    **@long_name**: (optional) :ref:`NX_CHAR <NX_CHAR>`

      x-axis offset from detector center

  .. index:: y_pixel_offset (field)

  **y_pixel_offset**: (optional) :ref:`NX_FLOAT <NX_FLOAT>` {units=\ :ref:`NX_LENGTH <NX_LENGTH>`}

    Offset from the detector center in the y-direction.
    Can be multidimensional when different values are required for each pixel.

    .. index:: axis (field attribute)

    **@axis**: (optional) :ref:`NX_POSINT <NX_POSINT>`


      Obligatory value:  ``2``

    .. index:: primary (field attribute)

    **@primary**: (optional) :ref:`NX_POSINT <NX_POSINT>`


      Obligatory value:  ``1``

    .. index:: long_name (field attribute)

    **@long_name**: (optional) :ref:`NX_CHAR <NX_CHAR>`

      y-axis offset from detector center

  .. index:: z_pixel_offset (field)

  **z_pixel_offset**: (optional) :ref:`NX_FLOAT <NX_FLOAT>` {units=\ :ref:`NX_LENGTH <NX_LENGTH>`}

    Offset from the detector center in the z-direction.
    Can be multidimensional when different values are required for each pixel.

    .. index:: axis (field attribute)

    **@axis**: (optional) :ref:`NX_POSINT <NX_POSINT>`


      Obligatory value:  ``3``

    .. index:: primary (field attribute)

    **@primary**: (optional) :ref:`NX_POSINT <NX_POSINT>`


      Obligatory value:  ``1``

    .. index:: long_name (field attribute)

    **@long_name**: (optional) :ref:`NX_CHAR <NX_CHAR>`

      y-axis offset from detector center

  .. index:: distance (field)

  **distance[np, i, j]**: (optional) :ref:`NX_FLOAT <NX_FLOAT>` {units=\ :ref:`NX_LENGTH <NX_LENGTH>`}

    This is the distance to the previous component in the
    instrument; most often the sample. The usage depends on the
    nature of the detector: Most often it is the distance of the
    detector assembly. But there are irregular detectors. In this
    case the distance must be specified for each detector pixel.

  .. index:: polar_angle (field)

  **polar_angle[np, i, j]**: (optional) :ref:`NX_FLOAT <NX_FLOAT>` {units=\ :ref:`NX_ANGLE <NX_ANGLE>`}

    This is the polar angle of the detector towards the previous
    component in the instrument; most often the sample.
    The usage depends on the
    nature of the detector.
    Most often it is the polar_angle of the detector assembly.
    But there are irregular detectors.
    In this
    case, the polar_angle  must be specified for each detector pixel.

  .. index:: azimuthal_angle (field)

  **azimuthal_angle[np, i, j]**: (optional) :ref:`NX_FLOAT <NX_FLOAT>` {units=\ :ref:`NX_ANGLE <NX_ANGLE>`}

    This is the azimuthal angle angle of the detector towards
    the previous component in the instrument; most often the sample.
    The usage depends on the
    nature of the detector.
    Most often it is the azimuthal_angle of the detector assembly.
    But there are irregular detectors.
    In this
    case, the azimuthal_angle  must be specified for each detector pixel.

  .. index:: description (field)

  **description**: (optional) :ref:`NX_CHAR <NX_CHAR>`

    name/manufacturer/model/etc. information

  .. index:: serial_number (field)

  **serial_number**: (optional) :ref:`NX_CHAR <NX_CHAR>`

    Serial number for the detector

  .. index:: local_name (field)

  **local_name**: (optional) :ref:`NX_CHAR <NX_CHAR>`

    Local name for the detector

  .. index:: solid_angle (field)

  **solid_angle[i, j]**: (optional) :ref:`NX_FLOAT <NX_FLOAT>` {units=\ :ref:`NX_SOLID_ANGLE <NX_SOLID_ANGLE>`}

    Solid angle subtended by the detector at the sample

  .. index:: x_pixel_size (field)

  **x_pixel_size[i, j]**: (optional) :ref:`NX_FLOAT <NX_FLOAT>` {units=\ :ref:`NX_LENGTH <NX_LENGTH>`}

    Size of each detector pixel. If it is scalar all pixels are the same size.

  .. index:: y_pixel_size (field)

  **y_pixel_size[i, j]**: (optional) :ref:`NX_FLOAT <NX_FLOAT>` {units=\ :ref:`NX_LENGTH <NX_LENGTH>`}

    Size of each detector pixel. If it is scalar all pixels are the same size

  .. index:: dead_time (field)

  **dead_time[np, i, j]**: (optional) :ref:`NX_FLOAT <NX_FLOAT>` {units=\ :ref:`NX_TIME <NX_TIME>`}

    Detector dead time

  .. index:: gas_pressure (field)

  **gas_pressure[i, j]**: (optional) :ref:`NX_FLOAT <NX_FLOAT>` {units=\ :ref:`NX_PRESSURE <NX_PRESSURE>`}

    Detector gas pressure

  .. index:: detection_gas_path (field)

  **detection_gas_path**: (optional) :ref:`NX_FLOAT <NX_FLOAT>` {units=\ :ref:`NX_LENGTH <NX_LENGTH>`}

    maximum drift space dimension

  .. index:: crate (field)

  **crate[i, j]**: (optional) :ref:`NX_INT <NX_INT>`

    Crate number of detector

    .. index:: local_name (field attribute)

    **@local_name**: (optional) :ref:`NX_CHAR <NX_CHAR>`

      Equivalent local term

  .. index:: slot (field)

  **slot[i, j]**: (optional) :ref:`NX_INT <NX_INT>`

    Slot number of detector

    .. index:: local_name (field attribute)

    **@local_name**: (optional) :ref:`NX_CHAR <NX_CHAR>`

      Equivalent local term

  .. index:: input (field)

  **input[i, j]**: (optional) :ref:`NX_INT <NX_INT>`

    Input number of detector

    .. index:: local_name (field attribute)

    **@local_name**: (optional) :ref:`NX_CHAR <NX_CHAR>`

      Equivalent local term

  .. index:: type (field)

  **type**: (optional) :ref:`NX_CHAR <NX_CHAR>`

    Description of type such as He3 gas cylinder, He3 PSD, scintillator,
    fission chamber, proportion counter, ion chamber, ccd, pixel, image plate,
    CMOS, ...

  .. index:: calibration_date (field)

  **calibration_date**: (optional) :ref:`NX_DATE_TIME <NX_DATE_TIME>`

    date of last calibration (geometry and/or efficiency) measurements

  .. index:: layout (field)

  **layout**: (optional) :ref:`NX_CHAR <NX_CHAR>`

    How the detector is represented

    Any of these values: ``point`` | ``linear`` | ``area``

  .. index:: count_time (field)

  **count_time[np]**: (optional) :ref:`NX_NUMBER <NX_NUMBER>` {units=\ :ref:`NX_TIME <NX_TIME>`}

    Elapsed actual counting time

  .. index:: sequence_number (field)

  **sequence_number[nBrightFrames]**: (optional) :ref:`NX_INT <NX_INT>`

    In order to properly sort the order of the images taken in (for
    example) a tomography experiment, a sequence number is stored with each
    image.

  .. index:: beam_center_x (field)

  **beam_center_x**: (optional) :ref:`NX_FLOAT <NX_FLOAT>` {units=\ :ref:`NX_LENGTH <NX_LENGTH>`}

    This is the x position where the direct beam would hit the detector.
    This is a length and can be outside of the actual
    detector. The length can be in physical units or pixels
    as documented by the units attribute.

  .. index:: beam_center_y (field)

  **beam_center_y**: (optional) :ref:`NX_FLOAT <NX_FLOAT>` {units=\ :ref:`NX_LENGTH <NX_LENGTH>`}

    This is the y position where the direct beam would hit the detector.
    This is a length and can be outside of the actual
    detector. The length can be in physical units or pixels
    as documented by the units attribute.

  .. index:: frame_start_number (field)

  **frame_start_number**: (optional) :ref:`NX_INT <NX_INT>`

    This is the start number of the first frame of a scan. In PX one
    often scans a couple of frames on a give sample, then does something else,
    then returns to the same sample and scans some more frames. Each time with
    a new data file. This number helps concatenating such measurements.

  .. index:: diameter (field)

  **diameter**: (optional) :ref:`NX_FLOAT <NX_FLOAT>` {units=\ :ref:`NX_LENGTH <NX_LENGTH>`}

    The diameter of a cylindrical detector

  .. index:: acquisition_mode (field)

  **acquisition_mode**: (optional) :ref:`NX_CHAR <NX_CHAR>`

    The acquisition mode of the detector.

    Any of these values:

      * ``gated``

      * ``triggered``

      * ``summed``

      * ``event``

      * ``histogrammed``

      * ``decimated``


  .. index:: angular_calibration_applied (field)

  **angular_calibration_applied**: (optional) :ref:`NX_BOOLEAN <NX_BOOLEAN>`

    True when the angular calibration has been applied in the
    electronics, false otherwise.

  .. index:: angular_calibration (field)

  **angular_calibration[i, j]**: (optional) :ref:`NX_FLOAT <NX_FLOAT>`

    Angular calibration data.

  .. index:: flatfield_applied (field)

  **flatfield_applied**: (optional) :ref:`NX_BOOLEAN <NX_BOOLEAN>`

    True when the flat field correction has been applied in the
    electronics, false otherwise.

  .. index:: flatfield (field)

  **flatfield[i, j]**: (optional) :ref:`NX_FLOAT <NX_FLOAT>`

    Flat field correction data.

  .. index:: flatfield_error (field)

  **flatfield_error[i, j]**: (optional) :ref:`NX_FLOAT <NX_FLOAT>`

    Errors of the flat field correction data.

  .. index:: pixel_mask_applied (field)

  **pixel_mask_applied**: (optional) :ref:`NX_BOOLEAN <NX_BOOLEAN>`

    True when the pixel mask correction has been applied in the
    electronics, false otherwise.

  .. index:: pixel_mask (field)

  **pixel_mask[i, j]**: (optional) :ref:`NX_INT <NX_INT>`

    The 32-bit pixel mask for the detector. Can be either one mask
    for the whole dataset (rank i, j) or each frame can have its own
    mask (rank np, i, j).

    Contains a bit field for each pixel to signal dead,
    blind or high or otherwise unwanted or undesirable pixels.
    They have the following meaning:

    .. can't make a table here, a bullet list will have to do for now

    * bit 0: gap (pixel with no sensor)
    * bit 1: dead
    * bit 2: under responding
    * bit 3: over responding
    * bit 4: noisy
    * bit 5: -undefined-
    * bit 6: pixel is part of a cluster of problematic pixels (bit set in addition to others)
    * bit 7: -undefined-
    * bit 8: user defined mask (e.g. around beamstop)
    * bits 9-30: -undefined-
    * bit 31: virtual pixel (corner pixel with interpolated value)

    Normal data analysis software would
    not take pixels into account
    when a bit in (mask & 0x0000FFFF) is
    set. Tag bit in the upper
    two bytes would indicate special pixel
    properties that normally
    would not be a sole reason to reject the
    intensity value (unless
    lower bits are set.

    If the full bit depths is not required, providing a
    mask with fewer bits is permissible.


  .. index:: countrate_correction__applied (field)

  **countrate_correction__applied**: (optional) :ref:`NX_BOOLEAN <NX_BOOLEAN>`

    True when a count-rate correction has already been applied in the
    electronics, false otherwise.

  .. index:: bit_depth_readout (field)

  **bit_depth_readout**: (optional) :ref:`NX_INT <NX_INT>`

    How many bits the electronics reads per pixel.
    With CCD's and single photon counting detectors,
    this must not align with traditional integer sizes.
    This can be 4, 8, 12, 14, 16, ...

  .. index:: detector_readout_time (field)

  **detector_readout_time**: (optional) :ref:`NX_FLOAT <NX_FLOAT>` {units=\ :ref:`NX_TIME <NX_TIME>`}

    Time it takes to read the detector (typically milliseconds).
    This is important to know for time resolved experiments.

  .. index:: trigger_delay_time (field)

  **trigger_delay_time**: (optional) :ref:`NX_FLOAT <NX_FLOAT>` {units=\ :ref:`NX_TIME <NX_TIME>`}

    Time it takes to start exposure after a trigger signal has been received.
    This is the reaction time of the detector firmware after receiving the trigger signal
    to when the detector starts to acquire the exposure, including any user set delay..
    This is important to know for time resolved experiments.

  .. index:: trigger_delay_time_set (field)

  **trigger_delay_time_set**: (optional) :ref:`NX_FLOAT <NX_FLOAT>` {units=\ :ref:`NX_TIME <NX_TIME>`}

    User-specified trigger delay.

  .. index:: trigger_internal_delay_time (field)

  **trigger_internal_delay_time**: (optional) :ref:`NX_FLOAT <NX_FLOAT>` {units=\ :ref:`NX_TIME <NX_TIME>`}

    Time it takes to start exposure after a trigger signal has been received.
    This is the reaction time of the detector hardware after receiving the
    trigger signal to when the detector starts to acquire the exposure.
    It forms the lower boundary of the trigger_delay_time when the user
    does not request an additional delay.

  .. index:: trigger_dead_time (field)

  **trigger_dead_time**: (optional) :ref:`NX_FLOAT <NX_FLOAT>` {units=\ :ref:`NX_TIME <NX_TIME>`}

    Time during which no new trigger signal can be accepted.
    Typically this is the
    trigger_delay_time + exposure_time + readout_time.
    This is important to know for time resolved experiments.

  .. index:: frame_time (field)

  **frame_time[NP]**: (optional) :ref:`NX_FLOAT <NX_FLOAT>` {units=\ :ref:`NX_TIME <NX_TIME>`}

    This is time for each frame. This is exposure_time + readout time.

  .. index:: gain_setting (field)

  **gain_setting**: (optional) :ref:`NX_CHAR <NX_CHAR>`

    The gain setting of the detector. This influences background etc.

    Any of these values: ``high`` | ``standard`` | ``fast`` | ``auto``

  .. index:: saturation_value (field)

  **saturation_value**: (optional) :ref:`NX_INT <NX_INT>`

    The value at which the detector goes into saturation.
    Especially common to CCD detectors, the data
    is known to be invalid above this value.

    For example, given a saturation_value and an underload_value, the valid
    pixels are those less than or equal to the saturation_value and greater
    than or equal to the underload_value.

  .. index:: underload_value (field)

  **underload_value**: (optional) :ref:`NX_INT <NX_INT>`

    The lowest value at which pixels for this detector would be reasonably
    measured. The data is known to be invalid below this value.

    For example, given a saturation_value and an underload_value, the valid
    pixels are those less than or equal to the saturation_value and greater
    than or equal to the underload_value.

  .. index:: number_of_cycles (field)

  **number_of_cycles**: (optional) :ref:`NX_INT <NX_INT>`

    CCD images are sometimes constructed by summing
    together multiple short exposures in the
    electronics. This reduces background etc.
    This is the number of short exposures used to sum
    images for an image.

  .. index:: sensor_material (field)

  **sensor_material**: (optional) :ref:`NX_CHAR <NX_CHAR>`

    At times, radiation is not directly sensed by the detector.
    Rather, the detector might sense the output from some
    converter like a scintillator.
    This is the name of this converter material.

  .. index:: sensor_thickness (field)

  **sensor_thickness**: (optional) :ref:`NX_FLOAT <NX_FLOAT>` {units=\ :ref:`NX_LENGTH <NX_LENGTH>`}

    At times, radiation is not directly sensed by the detector.
    Rather, the detector might sense the output from some
    converter like a scintillator.
    This is the thickness of this converter material.

  .. index:: threshold_energy (field)

  **threshold_energy**: (optional) :ref:`NX_FLOAT <NX_FLOAT>` {units=\ :ref:`NX_ENERGY <NX_ENERGY>`}

    Single photon counter detectors can be adjusted
    for a certain energy range in which they
    work optimally. This is the energy setting for this.

  **(geometry)**: (optional) :ref:`NXgeometry`

    Position and orientation of detector

  **efficiency**: (optional) :ref:`NXdata`

    Spectral efficiency of detector with respect to e.g. wavelength

    .. index:: signal (group attribute)

    **@signal**: (optional) :ref:`NX_CHAR <NX_CHAR>`


      Obligatory value:  ``efficiency``

    .. index:: axes (group attribute)

    **@axes**: (optional) :ref:`NX_CHAR <NX_CHAR>`


      Any of these values: ``.`` | ``. .`` | ``. . .`` | ``. . . .`` | ``wavelength``

    .. index:: wavelength_indices (group attribute)

    **@wavelength_indices**: (optional) :ref:`NX_CHAR <NX_CHAR>`


      Obligatory value:  ``0``

    .. index:: efficiency (field)

    **efficiency[i, j, k]**: (optional) :ref:`NX_FLOAT <NX_FLOAT>` {units=\ :ref:`NX_DIMENSIONLESS <NX_DIMENSIONLESS>`}

      efficiency of the detector

    .. index:: wavelength (field)

    **wavelength[i, j, k]**: (optional) :ref:`NX_FLOAT <NX_FLOAT>` {units=\ :ref:`NX_WAVELENGTH <NX_WAVELENGTH>`}

      This field can be two things:

      #. For a pixel detector it provides the nominal wavelength
         for which the detector has been calibrated.

      #. For other detectors this field has to be seen together with
         the efficiency field above.
         For some detectors, the efficiency is wavelength dependent.
         Thus this field provides the wavelength axis for the efficiency field.
         In this use case, the efficiency and wavelength arrays must
         have the same dimensionality.

    .. index:: start_time (field)

    **start_time[np]**: (optional) :ref:`NX_FLOAT <NX_FLOAT>` {units=\ :ref:`NX_TIME <NX_TIME>`}

      start time for each frame, with the ``start`` attribute as absolute reference

      .. index:: start (field attribute)

      **@start**: (optional) :ref:`NX_DATE_TIME <NX_DATE_TIME>`


    .. index:: stop_time (field)

    **stop_time[np]**: (optional) :ref:`NX_FLOAT <NX_FLOAT>` {units=\ :ref:`NX_TIME <NX_TIME>`}

      stop time for each frame, with the ``start`` attribute as absolute reference

      .. index:: start (field attribute)

      **@start**: (optional) :ref:`NX_DATE_TIME <NX_DATE_TIME>`


    .. index:: real_time (field)

    **real_time[i, j, k]**: (optional) :ref:`NX_NUMBER <NX_NUMBER>` {units=\ :ref:`NX_TIME <NX_TIME>`}

      real-time of the exposure (use this if exposure time varies for
      each array element, otherwise use ``count_time`` field)

  **calibration_method**: (optional) :ref:`NXnote`

    summary of conversion of array data to pixels (e.g. polynomial
    approximations) and location of details of the calibrations

  **data_file**: (optional) :ref:`NXnote`


  **(collection)**: (optional) :ref:`NXcollection`

    Use this group to provide other data related to this NXdetector group.

  **(detector_module)**: (optional) :ref:`NXdetector_module`

    For use in special cases where the data in NXdetector
    is represented in several parts, each with a separate geometry.

    Use one or more instances of the NXdetector_module
    group to declare regions of interest or some other
    subdivision of a detector.

**NXDL Source**:
  https://github.com/nexusformat/definitions/blob/master/base_classes/NXdetector.nxdl.xml
